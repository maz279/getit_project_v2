import{r as o,j as e,B as r,a$ as G,C as i,a as l,b as n,e as c,d as u,U as w,y as p,aX as b,G as I}from"./index-BbFXQDnE.js";import{AdminLayout as M}from"./AdminLayout-alOMyBm5.js";import{I as q}from"./Input-CWq-fe6X.js";import{L as m}from"./label-qlckO57s.js";import{T as _}from"./textarea-CX8_TXW8.js";import{C as K}from"./checkbox-BMRz0kTp.js";import{R as U,a as S}from"./radio-group-CMj-8-Vm.js";import{T as H,a as X,b as x,c as h}from"./tabs-C_4eq9Ip.js";import{D as B,b as D,c as T,d as R,f as Y}from"./dialog-BYX9Qgqu.js";import{A as v,a as N}from"./alert-DvfzjHjV.js";import{S as A}from"./separator-BYLJil6H.js";import{D as $}from"./download-D5vec4LB.js";import{M as f}from"./mail-DrpdqDGU.js";import{R as F,C as J,X as z,Y as Q,T as O,K as W,M as P,a as Z}from"./generateCategoricalChart-CBDTvbKT.js";import{B as ee}from"./BarChart-yzLGOrqH.js";import{P as se,a as ae}from"./PieChart-CJYfkqdk.js";import{C as re}from"./chart-column-BfcxbdnJ.js";import{S as te}from"./settings-ejHX-wzh.js";import{C as ie}from"./circle-alert-CyvoZE1T.js";import{U as le}from"./user-check-CqHVUGqs.js";import{S as ne}from"./square-pen-uuUha1pv.js";import{F as ce}from"./filter-DueI5JnT.js";import"./collapsible-ByfOq2Qt.js";import"./chevron-right-IRwc_YmF.js";import"./activity-7nEA8fdH.js";import"./trending-up-dHE_XUoW.js";import"./dollar-sign-9rEdS2q2.js";import"./chart-pie-rUETjBor.js";import"./calendar-DGqr6yW0.js";import"./list-Bc3g4Jxl.js";import"./refresh-cw-BsZBdGDw.js";import"./package-DaaEeyZO.js";import"./database-DZ9i_H1e.js";import"./message-square-BLsdo2Dg.js";import"./store-B5bAgGpV.js";import"./building-2-DA7A-SC9.js";import"./circle-help-KSrKV90u.js";import"./megaphone-e2UjBnwZ.js";import"./percent-FBunbajl.js";import"./chart-line-DU-yY9IN.js";import"./rotate-ccw-DipCAHdP.js";import"./scale-ZqVwkoLE.js";import"./clock-R8mzfB_N.js";import"./building-BXLNYb9P.js";import"./facebook-hhQ04ohN.js";import"./scroll-area-CqMEhS5I.js";import"./index-ByjSl0Ku.js";import"./index-BdQq_4o_.js";import"./info-CyhXcGJ3.js";import"./index-7AG9p6tt.js";import"./circle-C1E0hs4I.js";import"./Combination-D3IprPQZ.js";import"./tag-Cjw8PYDL.js";const me=[{id:"SEG001",name:"VIP Customers",description:"High-value customers with lifetime value > BDT 2L",customers:456,avgOrderValue:"BDT 12,450",totalRevenue:"BDT 56.8L",growthRate:"+23%",criteria:["Total Spent > BDT 2,00,000","Order Frequency > 5/month","Active in last 30 days"],tags:["high_value","frequent_buyer"],color:"#8B5CF6",status:"active"},{id:"SEG002",name:"Frequent Shoppers",description:"Customers who shop at least 3 times per month",customers:2345,avgOrderValue:"BDT 5,670",totalRevenue:"BDT 1.3Cr",growthRate:"+15%",criteria:["Order Frequency >= 3/month","Active in last 60 days"],tags:["loyal","engaged"],color:"#3B82F6",status:"active"},{id:"SEG003",name:"New Customers",description:"Customers who joined in the last 30 days",customers:1234,avgOrderValue:"BDT 3,450",totalRevenue:"BDT 42.5L",growthRate:"+45%",criteria:["Account Age < 30 days","First Purchase Made"],tags:["new","onboarding"],color:"#10B981",status:"active"},{id:"SEG004",name:"At Risk",description:"Previously active customers who haven't ordered in 60+ days",customers:890,avgOrderValue:"BDT 4,890",totalRevenue:"BDT 0",growthRate:"-100%",criteria:["Last Order > 60 days","Previous Order Count > 3"],tags:["at_risk","win_back"],color:"#F59E0B",status:"active"},{id:"SEG005",name:"Electronics Enthusiasts",description:"Customers who primarily buy electronics",customers:3456,avgOrderValue:"BDT 15,670",totalRevenue:"BDT 5.4Cr",growthRate:"+18%",criteria:["Electronics Orders > 70%","Total Spent > BDT 50,000"],tags:["category_electronics","tech_savvy"],color:"#EF4444",status:"active"}],y=[{name:"VIP Customers",value:456,percentage:3},{name:"Frequent Shoppers",value:2345,percentage:15},{name:"Regular Customers",value:8765,percentage:58},{name:"New Customers",value:1234,percentage:8},{name:"At Risk",value:890,percentage:6},{name:"Inactive",value:1544,percentage:10}],de=[{segment:"VIP",revenue:568,orders:3456,aov:12450},{segment:"Frequent",revenue:1300,orders:22940,aov:5670},{segment:"Regular",revenue:2100,orders:61355,aov:3425},{segment:"New",revenue:425,orders:1232,aov:3450},{segment:"At Risk",revenue:0,orders:0,aov:0}],ds=()=>{const[k,j]=o.useState(!1),[L,C]=o.useState(!1),[t,E]=o.useState(null),[d,g]=o.useState({name:"",description:"",criteriaType:"all",criteria:[]}),V=[{category:"Purchase Behavior",options:["Total Spent","Order Count","Average Order Value","Order Frequency"]},{category:"Customer Activity",options:["Last Order Date","Account Age","Last Login","Page Views"]},{category:"Demographics",options:["Location","Age Group","Gender","Language Preference"]},{category:"Product Preferences",options:["Category Preference","Brand Preference","Price Range","Payment Method"]}];return e.jsx(M,{currentPage:"Customer Segments",breadcrumbItems:[{label:"Customers",href:"/admin/customers"},{label:"Customer Segments"}],children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Customer Segmentation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Create and manage customer segments for targeted marketing"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(r,{variant:"outline",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Export Segments"]}),e.jsxs(r,{onClick:()=>j(!0),children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Create Segment"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(i,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(n,{className:"text-sm font-medium text-gray-600",children:"Total Segments"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"12"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Active segments"})]})]}),e.jsxs(i,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(n,{className:"text-sm font-medium text-gray-600",children:"Segmented Customers"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"13,234"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"87% of total"})]})]}),e.jsxs(i,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(n,{className:"text-sm font-medium text-gray-600",children:"Segment Revenue"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"BDT 4.8Cr"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"+18% vs last month"})]})]}),e.jsxs(i,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(n,{className:"text-sm font-medium text-gray-600",children:"Campaigns Active"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"8"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Targeting segments"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(n,{children:"Customer Segments"}),e.jsx(u,{children:"Manage your customer segments and targeting rules"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:me.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:()=>{E(s),C(!0)},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${s.color}20`},children:e.jsx(w,{className:"w-5 h-5",style:{color:s.color}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[s.name,s.status==="active"&&e.jsx(p,{className:"bg-green-100 text-green-800 text-xs",children:"Active"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.tags.map(a=>e.jsx(p,{variant:"secondary",className:"text-xs",children:a},a))})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.customers}),e.jsx("div",{className:"text-sm text-gray-500",children:"customers"}),e.jsx("div",{className:"text-xs text-green-600 font-medium mt-1",children:s.growthRate})]})]}),e.jsx(A,{className:"my-3"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Avg Order Value:"}),e.jsx("p",{className:"font-medium",children:s.avgOrderValue})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Revenue:"}),e.jsx("p",{className:"font-medium",children:s.totalRevenue})]}),e.jsx("div",{className:"text-right",children:e.jsxs(r,{size:"sm",variant:"outline",onClick:a=>{a.stopPropagation()},children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Campaign"]})})]})]},s.id))})})]}),e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(n,{children:"Segment Performance"}),e.jsx(u,{children:"Revenue contribution by segment"})]}),e.jsx(c,{children:e.jsx(F,{width:"100%",height:300,children:e.jsxs(ee,{data:de,children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"segment"}),e.jsx(Q,{}),e.jsx(O,{}),e.jsx(W,{}),e.jsx(P,{dataKey:"revenue",fill:"#3B82F6",name:"Revenue (Lakhs)"}),e.jsx(P,{dataKey:"aov",fill:"#10B981",name:"AOV (BDT)"})]})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(n,{children:"Customer Distribution"}),e.jsx(u,{children:"Breakdown by segment"})]}),e.jsxs(c,{children:[e.jsx(F,{width:"100%",height:200,children:e.jsxs(se,{children:[e.jsx(ae,{data:y,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:y.map((s,a)=>e.jsx(Z,{fill:["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#6B7280"][a]},`cell-${a}`))}),e.jsx(O,{})]})}),e.jsx("div",{className:"mt-4 space-y-2",children:y.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#6B7280"][a]}}),e.jsx("span",{children:s.name})]}),e.jsxs("span",{className:"font-medium",children:[s.percentage,"%"]})]},s.name))})]})]}),e.jsxs(i,{children:[e.jsx(l,{children:e.jsx(n,{children:"Quick Actions"})}),e.jsxs(c,{className:"space-y-2",children:[e.jsxs(r,{variant:"outline",className:"w-full justify-start",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Create Targeted Campaign"]}),e.jsxs(r,{variant:"outline",className:"w-full justify-start",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Segment Analytics"]}),e.jsxs(r,{variant:"outline",className:"w-full justify-start",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Send Segment Offers"]}),e.jsxs(r,{variant:"outline",className:"w-full justify-start",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Automation Rules"]})]})]}),e.jsxs(v,{className:"border-orange-200 bg-orange-50",children:[e.jsx(ie,{className:"h-4 w-4 text-orange-600"}),e.jsxs(N,{children:[e.jsx("strong",{children:"890 customers at risk!"})," Consider launching a win-back campaign for customers who haven't ordered in 60+ days."]})]})]})]}),e.jsx(B,{open:k,onOpenChange:j,children:e.jsxs(D,{className:"max-w-2xl",children:[e.jsx(T,{children:e.jsx(R,{children:"Create Customer Segment"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"segment-name",children:"Segment Name *"}),e.jsx(q,{id:"segment-name",placeholder:"e.g., High-Value Fashion Buyers",value:d.name,onChange:s=>g({...d,name:s.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"segment-description",children:"Description"}),e.jsx(_,{id:"segment-description",placeholder:"Describe the segment and its purpose...",value:d.description,onChange:s=>g({...d,description:s.target.value}),className:"mt-1",rows:3})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Criteria Logic"}),e.jsxs(U,{value:d.criteriaType,onValueChange:s=>g({...d,criteriaType:s}),className:"mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{value:"all",id:"all"}),e.jsx(m,{htmlFor:"all",children:"Match ALL criteria (AND)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{value:"any",id:"any"}),e.jsx(m,{htmlFor:"any",children:"Match ANY criteria (OR)"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Segment Criteria"}),e.jsx("div",{className:"space-y-4 mt-3",children:V.map(s=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:s.category}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.options.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{id:a}),e.jsx(m,{htmlFor:a,className:"font-normal text-sm",children:a})]},a))})]},s.category))})]}),e.jsxs(v,{children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs(N,{children:["Based on current criteria, approximately ",e.jsx("strong",{children:"2,345 customers"})," will be included in this segment."]})]})]}),e.jsxs(Y,{children:[e.jsx(r,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(r,{children:"Create Segment"})]})]})}),e.jsx(B,{open:L,onOpenChange:C,children:e.jsxs(D,{className:"max-w-3xl",children:[e.jsx(T,{children:e.jsx(R,{children:"Segment Details"})}),t&&e.jsxs(H,{defaultValue:"overview",className:"mt-4",children:[e.jsxs(X,{className:"grid w-full grid-cols-4",children:[e.jsx(x,{value:"overview",children:"Overview"}),e.jsx(x,{value:"criteria",children:"Criteria"}),e.jsx(x,{value:"customers",children:"Customers"}),e.jsx(x,{value:"campaigns",children:"Campaigns"})]}),e.jsxs(h,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Segment Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("span",{className:"font-medium",children:t.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx(p,{className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsx("span",{children:"Jun 15, 2024"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),e.jsx("span",{children:"Jun 28, 2024"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Customers:"}),e.jsx("span",{className:"font-medium",children:t.customers})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg Order Value:"}),e.jsx("span",{className:"font-medium",children:t.avgOrderValue})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Revenue:"}),e.jsx("span",{className:"font-medium",children:t.totalRevenue})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Growth Rate:"}),e.jsx("span",{className:"font-medium text-green-600",children:t.growthRate})]})]})]})]}),e.jsx(A,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Segment Description"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(r,{className:"flex-1",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Create Campaign"]}),e.jsxs(r,{variant:"outline",className:"flex-1",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Edit Segment"]})]})]}),e.jsx(h,{value:"criteria",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(v,{children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx(N,{children:"Customers must match ALL of the following criteria to be included in this segment."})]}),e.jsx("div",{className:"space-y-3",children:t.criteria.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s})]},a))})]})}),e.jsx(h,{value:"customers",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(w,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Customer list view would be displayed here"})]})}),e.jsx(h,{value:"campaigns",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Campaign history would be displayed here"})]})})]})]})})]})})};export{ds as default};
