import{r as w,j as e,B as Y,C as x,a as h,b as g,d as R,e as u,w as re,z as le,y as C,U as ne,aX as ce,M as oe}from"./index-BbFXQDnE.js";import{u as j}from"./useQuery-CRIkWQSp.js";import{T as de,a as me,b as p,c as f}from"./tabs-C_4eq9Ip.js";import{S as xe,a as he,b as ge,c as ue,d as v}from"./select-CnlAahch.js";import{A as y,a as i}from"./AnimatedChartWidget-C2SAsS5g.js";import{A as L}from"./AnimatedGaugeWidget-BMbMni-2.js";import{A as je}from"./AnimatedActivityFeed-C_3UJIlk.js";import{m as ve}from"./proxy-DDa1Qohe.js";import{R as pe}from"./refresh-cw-BsZBdGDw.js";import{D as fe}from"./download-D5vec4LB.js";import{A as ye}from"./award-DqYvMtii.js";import{T as Ne}from"./trending-up-dHE_XUoW.js";import{T as be}from"./trending-down-BL4KzBQx.js";import"./index-ByjSl0Ku.js";import"./index-BdQq_4o_.js";import"./Combination-D3IprPQZ.js";import"./index-7AG9p6tt.js";import"./chevron-up-CwwMYm58.js";import"./chart-column-BfcxbdnJ.js";import"./minus-RxNGvtwg.js";import"./dollar-sign-9rEdS2q2.js";import"./activity-7nEA8fdH.js";import"./generateCategoricalChart-CBDTvbKT.js";import"./chart-pie-rUETjBor.js";import"./PieChart-CJYfkqdk.js";import"./BarChart-yzLGOrqH.js";import"./AreaChart-CpP2idrM.js";import"./Area-BsGn6-p4.js";import"./LineChart-DVaUpGV3.js";import"./Line-B6amkYGo.js";import"./gauge-Bx8qdUWk.js";import"./avatar-t6J8pLpg.js";import"./clock-R8mzfB_N.js";import"./package-DaaEeyZO.js";const ts=()=>{var P,V,K,q,M,D,F,B,E,U,$,z,H;const[n,G]=w.useState("last30Days"),[O,we]=w.useState("all"),[S,A]=w.useState(!1),{data:W,isLoading:Q,refetch:X}=j({queryKey:["/api/v1/analytics/customers/overview",n,O],enabled:!0,refetchInterval:3e5}),{data:J,isLoading:N}=j({queryKey:["/api/v1/analytics/customers/segments",n],enabled:!0,refetchInterval:6e5}),{data:Z,isLoading:b}=j({queryKey:["/api/v1/analytics/customers/trends",n],enabled:!0,refetchInterval:3e5}),{data:_,isLoading:T}=j({queryKey:["/api/v1/analytics/customers/geography",n],enabled:!0,refetchInterval:3e5}),{data:ee,isLoading:k}=j({queryKey:["/api/v1/analytics/customers/loyalty",n],enabled:!0,refetchInterval:3e5}),{data:se,isLoading:I}=j({queryKey:["/api/v1/analytics/customers/bangladesh",n],enabled:!0,refetchInterval:3e5}),s=W,t=J,o=Z,d=_,m=ee,r=se,ae=async()=>{A(!0),await Promise.all([X()]),A(!1)},ie=a=>{console.log(`Exporting customer analytics in ${a} format`)},c=Q||N||b,te=[{id:"1",type:"user",title:"New VIP Customer",description:"Fatima Rahman joined VIP tier",timestamp:new Date(Date.now()-3e5),metadata:{location:"Dhaka",status:"active"},user:{name:"Fatima Rahman"}},{id:"2",type:"user",title:"High-Value Purchase",description:"Customer spent ৳25,000 in single order",timestamp:new Date(Date.now()-6e5),metadata:{amount:25e3,location:"Chittagong"},user:{name:"Ahmed Khan"}},{id:"3",type:"alert",title:"Churn Risk Alert",description:"15 customers at risk of churning",timestamp:new Date(Date.now()-9e5),metadata:{priority:"high"}}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-slate-800 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs(ve.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Customer Analytics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Comprehensive customer insights and behavior analysis"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(xe,{value:n,onValueChange:G,children:[e.jsx(he,{className:"w-40",children:e.jsx(ge,{placeholder:"Select period"})}),e.jsxs(ue,{children:[e.jsx(v,{value:"today",children:"Today"}),e.jsx(v,{value:"yesterday",children:"Yesterday"}),e.jsx(v,{value:"last7Days",children:"Last 7 Days"}),e.jsx(v,{value:"last30Days",children:"Last 30 Days"}),e.jsx(v,{value:"last90Days",children:"Last 90 Days"}),e.jsx(v,{value:"thisYear",children:"This Year"})]})]}),e.jsxs(Y,{variant:"outline",size:"sm",onClick:ae,disabled:S,children:[e.jsx(pe,{className:`h-4 w-4 mr-2 ${S?"animate-spin":""}`}),"Refresh"]}),e.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>ie("excel"),children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(y,{title:"Total Customers",data:{value:((P=s==null?void 0:s.overview)==null?void 0:P.totalCustomers)||0,change:8.2,target:(((V=s==null?void 0:s.overview)==null?void 0:V.totalCustomers)||0)*1.1,format:"number",trend:"up"},icon:"customers",loading:c,animationDelay:.1}),e.jsx(y,{title:"Active Customers",data:{value:((K=s==null?void 0:s.overview)==null?void 0:K.activeCustomers)||0,change:5.7,target:(((q=s==null?void 0:s.overview)==null?void 0:q.totalCustomers)||0)*.8,format:"number",trend:"up"},icon:"customers",loading:c,animationDelay:.2}),e.jsx(y,{title:"Customer Lifetime Value",data:{value:((M=s==null?void 0:s.overview)==null?void 0:M.averageLifetimeValue)||0,change:12.4,target:(((D=s==null?void 0:s.overview)==null?void 0:D.averageLifetimeValue)||0)*1.2,format:"currency",trend:"up"},icon:"value",loading:c,animationDelay:.3}),e.jsx(y,{title:"Retention Rate",data:{value:((F=s==null?void 0:s.overview)==null?void 0:F.retentionRate)||0,change:-2.1,target:85,format:"percentage",trend:"down"},icon:"retention",loading:c,animationDelay:.4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(de,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(me,{className:"grid w-full grid-cols-5",children:[e.jsx(p,{value:"overview",children:"Overview"}),e.jsx(p,{value:"segments",children:"Segments"}),e.jsx(p,{value:"geography",children:"Geography"}),e.jsx(p,{value:"loyalty",children:"Loyalty"}),e.jsx(p,{value:"bangladesh",children:"Bangladesh"})]}),e.jsxs(f,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(i,{title:"Customer Acquisition Trend",data:(o==null?void 0:o.acquisitionTrend)||[],type:"line",loading:b,height:300,colors:["#3B82F6","#10B981"],animationDelay:.1}),e.jsx(i,{title:"Customer Value Distribution",data:(o==null?void 0:o.valueDistribution)||[],type:"bar",loading:b,height:300,colors:["#8B5CF6"],animationDelay:.2})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(L,{title:"Customer Satisfaction",data:{current:((B=s==null?void 0:s.overview)==null?void 0:B.satisfactionScore)||0,target:85,max:100,unit:"%",trend:"up",status:"good"},loading:c,animationDelay:.1}),e.jsx(L,{title:"Retention Rate",data:{current:((E=s==null?void 0:s.overview)==null?void 0:E.retentionRate)||0,target:80,max:100,unit:"%",trend:"stable",status:"warning"},loading:c,animationDelay:.2}),e.jsx(L,{title:"Churn Risk",data:{current:((U=s==null?void 0:s.overview)==null?void 0:U.churnRate)||0,target:5,max:20,unit:"%",trend:"down",status:"good"},loading:c,animationDelay:.3})]})]}),e.jsxs(f,{value:"segments",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(i,{title:"RFM Segmentation",data:(t==null?void 0:t.rfm)||[],type:"pie",loading:N,height:300,animationDelay:.1}),e.jsx(i,{title:"Customer Lifecycle",data:(t==null?void 0:t.lifecycle)||[],type:"bar",loading:N,height:300,colors:["#F59E0B"],animationDelay:.2})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(g,{children:"Segment Performance"}),e.jsx(R,{children:"Key metrics by customer segment"})]}),e.jsx(u,{children:e.jsx("div",{className:"space-y-4",children:((t==null?void 0:t.behavioral)||[]).slice(0,5).map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:(a==null?void 0:a.name)||`Segment ${l+1}`}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(a==null?void 0:a.count)||0," customers"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["৳",((a==null?void 0:a.avgValue)||0).toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Avg. Value"})]})]},l))})})]})]}),e.jsx(f,{value:"geography",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(i,{title:"Customers by Division",data:(d==null?void 0:d.byDivision)||[],type:"bar",loading:T,height:300,colors:["#059669"],animationDelay:.1}),e.jsx(i,{title:"Urban vs Rural",data:(d==null?void 0:d.urbanVsRural)||[],type:"pie",loading:T,height:300,animationDelay:.2})]})}),e.jsxs(f,{value:"loyalty",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(i,{title:"Loyalty Tier Distribution",data:(m==null?void 0:m.tierDistribution)||[],type:"pie",loading:k,height:300,animationDelay:.1}),e.jsx(i,{title:"Points Redemption Trend",data:(m==null?void 0:m.pointsRedemption)||[],type:"line",loading:k,height:300,colors:["#DC2626"],animationDelay:.2})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(g,{children:"Loyalty Program Performance"}),e.jsx(R,{children:"Key loyalty metrics and insights"})]}),e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx(ye,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"2,450"}),e.jsx("p",{className:"text-sm text-gray-600",children:"VIP Members"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx(re,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"4.7"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Avg. Rating"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx(le,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"78%"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Repeat Rate"})]})]})})]})]}),e.jsxs(f,{value:"bangladesh",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(i,{title:"Mobile Banking Usage",data:(r==null?void 0:r.mobileUsage)||[],type:"pie",loading:I,height:300,animationDelay:.1}),e.jsx(i,{title:"Payment Preferences",data:(r==null?void 0:r.paymentPreferences)||[],type:"bar",loading:I,height:300,colors:["#7C3AED"],animationDelay:.2})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(g,{children:"Cultural Insights"}),e.jsx(R,{children:"Bangladesh-specific customer behavior patterns"})]}),e.jsx(u,{children:e.jsx("div",{className:"space-y-4",children:((r==null?void 0:r.culturalInsights)||[]).map((a,l)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:(a==null?void 0:a.title)||`Insight ${l+1}`}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(a==null?void 0:a.description)||"Cultural behavior pattern identified"}),e.jsx(C,{variant:"outline",className:"mt-2",children:(a==null?void 0:a.category)||"General"})]},l))})})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-blue-600"}),"Customer Overview"]})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"New Customers"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:(($=s==null?void 0:s.overview)==null?void 0:$.newCustomers)||0})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Churn Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-red-600"}),e.jsxs("span",{className:"text-sm",children:[((z=s==null?void 0:s.overview)==null?void 0:z.churnRate)||0,"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Satisfaction Score"}),e.jsxs(C,{variant:"default",children:[((H=s==null?void 0:s.overview)==null?void 0:H.satisfactionScore)||0,"/100"]})]})]})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-purple-600"}),"Top Segments"]})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-3",children:["VIP Customers","Frequent Buyers","New Customers","At Risk"].map((a,l)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:a}),e.jsx(C,{variant:"outline",children:Math.floor(Math.random()*1e3)})]},l))})})]}),e.jsx(je,{title:"Customer Activity",activities:te,loading:!1,maxItems:5,showTimestamps:!0,realTime:!0,animationDelay:.3}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-green-600"}),"Geographic Distribution"]})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-3",children:["Dhaka","Chittagong","Sylhet","Khulna","Rajshahi"].map((a,l)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:a}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.floor(Math.random()*30),"%"]})]},l))})})]})]})]})]})})};export{ts as default};
