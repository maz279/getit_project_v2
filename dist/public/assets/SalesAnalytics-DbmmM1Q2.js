import{r as p,j as e,B as q,C as x,a as h,b as g,aX as D,e as j,y as n,U as ee,d as H}from"./index-BbFXQDnE.js";import{u as f}from"./useQuery-CRIkWQSp.js";import{T as se,a as ae,b as u,c as v}from"./tabs-C_4eq9Ip.js";import{S as re,a as ie,b as te,c as ne,d}from"./select-CnlAahch.js";import{A as y,a as c}from"./AnimatedChartWidget-C2SAsS5g.js";import{A as w}from"./AnimatedGaugeWidget-BMbMni-2.js";import{m as le}from"./proxy-DDa1Qohe.js";import{R as ce}from"./refresh-cw-BsZBdGDw.js";import{D as oe}from"./download-D5vec4LB.js";import{T as de}from"./trending-up-dHE_XUoW.js";import"./index-ByjSl0Ku.js";import"./index-BdQq_4o_.js";import"./Combination-D3IprPQZ.js";import"./index-7AG9p6tt.js";import"./chevron-up-CwwMYm58.js";import"./chart-column-BfcxbdnJ.js";import"./minus-RxNGvtwg.js";import"./trending-down-BL4KzBQx.js";import"./dollar-sign-9rEdS2q2.js";import"./activity-7nEA8fdH.js";import"./generateCategoricalChart-CBDTvbKT.js";import"./chart-pie-rUETjBor.js";import"./PieChart-CJYfkqdk.js";import"./BarChart-yzLGOrqH.js";import"./AreaChart-CpP2idrM.js";import"./Area-BsGn6-p4.js";import"./LineChart-DVaUpGV3.js";import"./Line-B6amkYGo.js";import"./gauge-Bx8qdUWk.js";const We=()=>{var P,k,L,A,I,B,V,F,O,E,G,K,M;const[m,W]=p.useState("last30Days"),[$,me]=p.useState("all"),[U,xe]=p.useState("all"),[b,C]=p.useState(!1),{data:Y,isLoading:z,refetch:Q}=f({queryKey:["/api/v1/analytics/sales/overview",m,$,U],enabled:!0,refetchInterval:3e5}),{data:S,isLoading:T}=f({queryKey:["/api/v1/analytics/sales/trends",m],enabled:!0,refetchInterval:3e5}),{data:X,isLoading:N}=f({queryKey:["/api/v1/analytics/sales/forecasts",m],enabled:!0,refetchInterval:6e5}),{data:J,isLoading:R}=f({queryKey:["/api/v1/analytics/sales/bangladesh",m],enabled:!0,refetchInterval:3e5}),s=Y,r=S,o=X,i=J,Z=async()=>{C(!0),await Promise.all([Q()]),C(!1)},_=a=>{console.log(`Exporting sales analytics in ${a} format`)},t=z||T||N;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-slate-800 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs(le.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Sales Analytics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Comprehensive sales performance and insights"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(re,{value:m,onValueChange:W,children:[e.jsx(ie,{className:"w-40",children:e.jsx(te,{placeholder:"Select period"})}),e.jsxs(ne,{children:[e.jsx(d,{value:"today",children:"Today"}),e.jsx(d,{value:"yesterday",children:"Yesterday"}),e.jsx(d,{value:"last7Days",children:"Last 7 Days"}),e.jsx(d,{value:"last30Days",children:"Last 30 Days"}),e.jsx(d,{value:"last90Days",children:"Last 90 Days"}),e.jsx(d,{value:"thisYear",children:"This Year"})]})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:Z,disabled:b,children:[e.jsx(ce,{className:`h-4 w-4 mr-2 ${b?"animate-spin":""}`}),"Refresh"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>_("excel"),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(y,{title:"Total Revenue",data:{value:((P=s==null?void 0:s.overview)==null?void 0:P.totalRevenue)||0,change:((k=s==null?void 0:s.overview)==null?void 0:k.revenueGrowth)||0,target:(((L=s==null?void 0:s.overview)==null?void 0:L.totalRevenue)||0)*1.2,format:"currency",trend:(((A=s==null?void 0:s.overview)==null?void 0:A.revenueGrowth)||0)>0?"up":"down"},icon:"revenue",loading:t,animationDelay:.1}),e.jsx(y,{title:"Total Orders",data:{value:((I=s==null?void 0:s.overview)==null?void 0:I.totalOrders)||0,change:((B=s==null?void 0:s.overview)==null?void 0:B.orderGrowth)||0,target:(((V=s==null?void 0:s.overview)==null?void 0:V.totalOrders)||0)*1.15,format:"number",trend:(((F=s==null?void 0:s.overview)==null?void 0:F.orderGrowth)||0)>0?"up":"down"},icon:"orders",loading:t,animationDelay:.2}),e.jsx(y,{title:"Average Order Value",data:{value:((O=s==null?void 0:s.overview)==null?void 0:O.averageOrderValue)||0,change:5.2,target:(((E=s==null?void 0:s.overview)==null?void 0:E.averageOrderValue)||0)*1.1,format:"currency",trend:"up"},icon:"value",loading:t,animationDelay:.3}),e.jsx(y,{title:"Conversion Rate",data:{value:((G=s==null?void 0:s.overview)==null?void 0:G.conversionRate)||0,change:2.1,target:3.5,format:"percentage",trend:"up"},icon:"conversion",loading:t,animationDelay:.4})]}),e.jsxs(se,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ae,{className:"grid w-full grid-cols-5",children:[e.jsx(u,{value:"overview",children:"Overview"}),e.jsx(u,{value:"trends",children:"Trends"}),e.jsx(u,{value:"forecasts",children:"Forecasts"}),e.jsx(u,{value:"bangladesh",children:"Bangladesh"}),e.jsx(u,{value:"performance",children:"Performance"})]}),e.jsxs(v,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(c,{title:"Revenue Trend",data:((K=s==null?void 0:s.charts)==null?void 0:K.revenueChart)||[],type:"line",loading:t,height:300,colors:["#3B82F6","#10B981"],animationDelay:.1}),e.jsx(c,{title:"Orders by Category",data:((M=s==null?void 0:s.charts)==null?void 0:M.categoryBreakdown)||[],type:"pie",loading:t,height:300,animationDelay:.2})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-blue-600"}),"Sales Targets"]})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Monthly Target"}),e.jsx(n,{variant:"secondary",children:"85% Complete"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Quarterly Target"}),e.jsx(n,{variant:"secondary",children:"72% Complete"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Annual Target"}),e.jsx(n,{variant:"secondary",children:"65% Complete"})]})]})})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-green-600"}),"Top Products"]})}),e.jsx(j,{children:e.jsx("div",{className:"space-y-3",children:((r==null?void 0:r.topProducts)||[]).slice(0,5).map((a,l)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:(a==null?void 0:a.name)||`Product ${l+1}`}),e.jsxs("span",{className:"text-sm font-medium",children:["à§³",((a==null?void 0:a.revenue)||0).toLocaleString()]})]},l))})})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-purple-600"}),"Customer Segments"]})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"New Customers"}),e.jsx(n,{variant:"outline",children:"25%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Returning Customers"}),e.jsx(n,{variant:"outline",children:"65%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"VIP Customers"}),e.jsx(n,{variant:"outline",children:"10%"})]})]})})]})]})]}),e.jsx(v,{value:"trends",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(c,{title:"Hourly Revenue Pattern",data:(r==null?void 0:r.hourlyRevenue)||[],type:"bar",loading:T,height:300,colors:["#8B5CF6"],animationDelay:.1}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(g,{children:"Peak Sales Hours"}),e.jsx(H,{children:"Best performing time periods"})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-3",children:((r==null?void 0:r.peakHours)||[]).map((a,l)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:a}),e.jsx(n,{variant:"secondary",children:"Peak"})]},l))})})]})]})}),e.jsx(v,{value:"forecasts",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(c,{title:"Next Week Forecast",data:(o==null?void 0:o.nextWeek)||[],type:"line",loading:N,height:300,colors:["#F59E0B","#10B981"],animationDelay:.1}),e.jsx(c,{title:"Monthly Forecast",data:(o==null?void 0:o.nextMonth)||[],type:"area",loading:N,height:300,colors:["#EF4444","#3B82F6"],animationDelay:.2})]})}),e.jsxs(v,{value:"bangladesh",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(c,{title:"Payment Method Preferences",data:(i==null?void 0:i.paymentMethods)||[],type:"pie",loading:R,height:300,animationDelay:.1}),e.jsx(c,{title:"Sales by Division",data:(i==null?void 0:i.divisions)||[],type:"bar",loading:R,height:300,colors:["#059669"],animationDelay:.2})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(g,{children:"Festival Impact Analysis"}),e.jsx(H,{children:"Sales performance during Bangladesh festivals"})]}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:((i==null?void 0:i.festivalImpact)||[]).map((a,l)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:(a==null?void 0:a.name)||`Festival ${l+1}`}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Revenue Impact: +",(a==null?void 0:a.impact)||0,"%"]}),e.jsx(n,{variant:"outline",className:"mt-2",children:(a==null?void 0:a.status)||"Completed"})]},l))})})]})]}),e.jsx(v,{value:"performance",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(w,{title:"Sales Performance",data:{current:85,target:100,max:100,unit:"%",trend:"up",status:"good"},loading:t,animationDelay:.1}),e.jsx(w,{title:"Target Achievement",data:{current:72,target:80,max:100,unit:"%",trend:"up",status:"warning"},loading:t,animationDelay:.2}),e.jsx(w,{title:"Customer Satisfaction",data:{current:92,target:90,max:100,unit:"%",trend:"up",status:"excellent"},loading:t,animationDelay:.3})]})})]})]})})};export{We as default};
